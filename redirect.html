<script>
  (function () {
    const qs = window.location.search || '';
    const hash = window.location.hash || '';

    // ✅ Stabiler: path statt host
    const deepLink = 'ezidiid:///reset-password' + qs + hash;

    document.getElementById('debug').textContent =
      'URL: ' + window.location.href + '\nDeepLink: ' + deepLink;

    const btn = document.getElementById('openBtn');
    btn.href = deepLink;

    const status = document.getElementById('status');
    status.textContent = 'Status: bereit. Tippe „App öffnen“.';

    // ✅ iOS: App öffnen NUR zuverlässig nach User-Klick
    btn.addEventListener('click', (e) => {
      e.preventDefault();
      window.location.assign(deepLink);
    });

    // Optional: auto attempt (kann iOS blocken)
    setTimeout(() => {
      try { window.location.assign(deepLink); } catch (e) {}
    }, 150);

    setTimeout(() => {
      status.textContent = 'Status: falls nichts passiert, tippe „App öffnen“.';
    }, 1200);
  })();
</script>
